{
  "commands": {
    "LED": {
      "description": "Controls the state of an LED.",
      "param_count": 3,
      "parameters": [
        {"name": "led_number",
          "type": "integer", 
          "param_number": 1, 
          "range": {"min": 1, "max": 8, "min_ignorable": true, "max_ignorable": true},
          "options": [],
          "condition": []
          },
        {"name": "mode",
          "type": "enum", 
          "param_number": 2, 
          "options": ["on_off",
            "toggle", 
            "blink", 
            "flash"
            ],
          "condition": []
          },
        {"name": "state",
          "type": "boolean",
          "param_number": 3, 
          "options": [],
          "condition": ["mode == on_off"]
          },
        {"name": "blink_count", 
          "type": "integer", 
          "param_number": 3, 
          "range": {"min": 1, "max": 50, "min_ignorable": false, "max_ignorable": true},
          "options": [],
          "condition": ["mode == blink"]
          },
        {"name": "blink_period", 
          "type": "float", 
          "param_number": 4, 
          "range": {"min": 0.1, "max": 10.0, "min_ignorable": true, "max_ignorable": true},
          "options": [],
          "condition": ["mode == blink"]
          },
        {"name": "flash_rate_hz", 
          "type": "float", 
          "param_number": 3, 
          "range": {"min": 0.5, "max": 100.0, "min_ignorable": true, "max_ignorable": false}, 
          "options": [],
          "condition": ["mode == flash"]
          },
        {"name": "duty_cycle", 
          "type": "float", 
          "param_number": 4, 
          "range": {"min": 0.0, "max": 100.0, "min_ignorable": false, "max_ignorable": false},
          "options": [],
          "condition": ["mode == flash"]
          }
        ],
      "function": "handle_led"
    },
    "HPL": {
      "description": "Controls high power logic voltage output.",
      "param_count": 2,
      "parameters": [
        {"name": "hpl_number",
          "type": "integer", 
          "param_number": 1, 
          "range": {"min": 1, "max": 4, "min_ignorable": true, "max_ignorable": true}
          },
        {"name": "mode", 
          "type": "enum", 
          "param_number": 2, 
          "options": ["on_off", "toggle"]
          },
        {"name": "state", "type": "boolean", "param_number": 3, "condition": "mode == on_off"}
        ],
      "function": "handle_hpl"
    },
    "DVR8833": {
      "description": "Controls a DVR8833 motor driver.",
      "param_count": 3,
      "parameters": [
        {"name": "motor_number", 
          "type": "integer", 
          "param_number": 1, 
          "range": {"min": 1, "max": 2, "min_ignorable": true, "max_ignorable": true}
          },
        {"name": "mode", 
          "type": "enum", 
          "param_number": 2, 
          "options": ["forward_reverse", "brake", "coast"]
          },
        {"name": "speed", 
          "type": "float", 
          "param_number": 3, 
          "range": {"min": 0.0, "max": 10000.0, "min_ignorable": true, "max_ignorable": true},
          "condition": ["mode == forward_reverse"]
          }
        ],
      "function": "handle_dvr8833"
    },
    "GET_LED": {
      "description": "Retrieve current state of a specific LED.",
      "param_count": 1,
      "parameters": [
          {"name": "led_number", 
              "type": "integer", 
              "param_number": 1,
              "range": {"min": 1,
              "max": 8}
              }
           ],
      "function": "handle_get_led",
      "returns": "mode_idx,state,blink_count,blink_period,flash_rate,flash_duty"
       },
    "GET_DVR8833": {
      "description": "Retrieve state of a specific DVR8833 motor driver.",
      "param_count": 1,
      "parameters": [{"name": "motor_number", "type": "integer", "param_number": 1, "range": {"min": 1, "max": 4}}],
      "function": "handle_get_dvr8833",
      "returns": "velocity,position,accel,max_pos_a,max_neg_a,running"
    },
    "GET_ALL": {
      "description": "Retrieve all current shared states.",
      "param_count": 0,
      "parameters": [],
      "function": "handle_get_all"
    }
  }
}